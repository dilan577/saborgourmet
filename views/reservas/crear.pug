extends ../layouts/main

block content
  h1.text-2xl.font-bold.mb-6= titulo

  form.card(method="POST" action="/reservas/crear")
    .space-y-4

      // ==========================
      // CLIENTE (NO SELECT)
      // ==========================
      if clienteLogueado
        div
          label.label Cliente
          input.input-field(
            type="text"
            value=`${clienteLogueado.nombre} ${clienteLogueado.apellido}`
            disabled
          )

      // ==========================
      // ADMIN / MESERO
      // ==========================
      if clientes
        div
          label.label Cliente *
          select.input-field(name="clienteId" required)
            option(value="") Seleccione un cliente
            each cliente in clientes
              option(value=cliente.id)= `${cliente.nombre} ${cliente.apellido} - ${cliente.email}`

      div
        label.label Fecha *
        input.input-field(
          type="date"
          name="fecha"
          required
          min=new Date().toISOString().split('T')[0]
        )

      div
        label.label Hora *
        select.input-field(name="hora" required)
          option(value="") Seleccione una hora
          // Las horas se cargarán dinámicamente según la fecha

      div
        label.label Personas *
        input.input-field(
          type="number"
          name="numeroPersonas"
          min="1"
          required
        )

      div
        label.label Mesa
        select.input-field(name="mesaId" required)
          option(value="") Seleccione una mesa
          each mesa in mesas
            option(value=mesa.id)= `${mesa.numero} (${mesa.capacidad} personas)`

      div.flex.justify-between.mt-6
        button.btn-primary(type="submit") Guardar Reserva
        button.btn-secondary(type="button" onclick="window.history.back()") Volver

  // ==========================
  // SCRIPT PARA CARGAR HORAS
  // ==========================
  script(src="/js/horas.js")
